<?phpadd_action('sidebar_admin_page', 'my_action_javascript');function my_action_javascript() {?><link rel="stylesheet" type="text/css" media="all" href="../wp-content/plugins/neat-skype-status/widget/css/global.css" /><script type="text/javascript" >/* * JTip * By Cody Lindley (http://www.codylindley.com) * Under an Attribution, Share Alike License * JTip is built on top of the very light weight jquery library. *///on page load (as soon as its ready) call JT_initjQuery(document).ready(JT_init);function JT_init(){			jQuery(".jTip").live('mouseenter',				   function()				   {						/*						if (this.title) {							jQuery(this).data('href_data', this.title);							jQuery(this).removeAttr('title');						}*/						jQuery('#JT').remove();												if (jQuery(this).data('title') != undefined) var tooltip_title = jQuery(this).data('title');						JT_show(this, jQuery(this).data('tooltip'),tooltip_title);										   }			   			);			/*			function(){						var parent_jTip = jQuery(this).closest('.jTip');						if (parent_jTip.length > 0) {							if (jQuery(parent_jTip).data('title') != undefined) var tooltip_title = jQuery(parent_jTip).data('title');							JT_show(parent_jTip, jQuery(parent_jTip).data('tooltip'),tooltip_title);						}					}*/						jQuery(".JT_close").live('click',				   function()				   {						jQuery('#JT').remove();				   }			);							jQuery('#donate_eur_radio').live('click', function() {					jQuery('.donate_usd').hide();					jQuery('.donate_eur').show();				});				jQuery('#donate_usd_radio').live('click', function() {					jQuery('.donate_eur').hide();					jQuery('.donate_usd').show();				});   }function JT_show(jt_object, url, title){	if(title == undefined)title="&nbsp;";	var de = document.documentElement;	var w = self.innerWidth || (de&&de.clientWidth) || document.body.clientWidth;		//Get some variables	//var positionFromRightside = w - jQuery(jt_object).position().left;	var widgetObject = jQuery(jt_object).closest('[id*="sci_widget"]');	var positionLeft = widgetObject.position().left  + 170;	var widgetWidth = widgetObject.width();	//alert(widgetWidth);	var positionFromRightside = w - positionLeft;	//alert(w);	var clickElementy = jQuery(jt_object).position().top + 20; //set y position	//alert(jQuery(jt_object).position().top);	var queryString = url.replace(/^[^\?]+\??/,'');	var params = parseQuery( queryString );	if(params['width'] === undefined){params['width'] = 250};	if(params['link'] !== undefined){	jQuery(jt_object).bind('click',function(){window.location = params['link']});	jQuery(jt_object).css('cursor','pointer');	}		if(positionFromRightside>((params['width']*1)+widgetWidth)){		jQuery('body').append("<div id='JT' style='width:"+params['width']*1+"px'><div id='JT_arrow_left'></div><div id='JT_close_left'>"+title+"<label class='JT_close'>x&nbsp;&nbsp;</label></div><div id='JT_copy'><div class='JT_loader'><div></div></div>");//right side		//var arrowOffset = getElementWidth(linkId) + 11;		var clickElementx = positionLeft + widgetWidth +11; //set x position	}else{		jQuery('body').append("<div id='JT' style='width:"+params['width']*1+"px'><div id='JT_arrow_right' style='left:"+((params['width']*1)+1)+"px'></div><div id='JT_close_right'><label class='JT_close left'>(x)&nbsp;&nbsp;</label>"+title+"</div><div id='JT_copy'><div class='JT_loader'><div></div></div>");//left side		var clickElementx = positionLeft - ((params['width']*1)) - 11; //set x position	}		jQuery('#JT').css({left: clickElementx+"px", top: clickElementy+"px"});	jQuery('#JT').show();	jQuery('#JT_copy').load(url);	//.append(jQuery('#howtogetit').html())}function parseQuery ( query ) {   var Params = new Object ();   if ( ! query ) return Params; // return empty object   var Pairs = query.split(/[;&]/);   for ( var i = 0; i < Pairs.length; i++ ) {      var KeyVal = Pairs[i].split('=');      if ( ! KeyVal || KeyVal.length != 2 ) continue;      var key = unescape( KeyVal[0] );      var val = unescape( KeyVal[1] );      val = val.replace(/\+/g, ' ');      Params[key] = val;   }   return Params;}jQuery(document).ready(function() {	jQuery('.add_new_skypename').live("click", function(){		jQuery(this).before('<tr><td><input size="8" name="visible_names[]" type="text" value=""/></td><td><input  size="5" name="skypenames[]" type="text" value=""></td><td><select name="skype_click_actions[]"><option selected="selected" value="call">Call</option><option value="chat">Chat</option><option value="add">Add</option><option value="userinfo">Profile</option><option value="voicemail">V-mail</option><option value="sendfile">File</option><option  value="map">Map</option></select></td><td class="skypename_delete"><label>X</label></td></tr>');	});		jQuery('.skypename_delete').live("click", function(){		jQuery(this).parent().remove();	});		//Row		jQuery('#radio_row').live('click', function() {		jQuery('.expl').hide();		jQuery('.expl_row').show();	});		//Board		jQuery('#radio_board').live('click', function() {		jQuery('.expl').hide();		jQuery('.expl_board').show();	});		//Integrated		jQuery('#radio_integrated').live('click', function() {		//$('input[type=radio]').attr('checked', 'checked');		jQuery('.expl').hide();		jQuery('.expl_integrated').show();	});	jQuery('#float_ed').live('click', function(){		jQuery('.float_choices').attr('disabled',!this.checked)	});	})</script><?php}
class SCI_Widget2 extends WP_Widget {

	function SCI_Widget2() {
		// Instantiate the parent object
		parent::WP_Widget( false,
			$name = __( 'Neat Skype Status v2', GCI_TEXT_DOMAIN ),
			array( 'description' => __( 'Add multiple skype accounts / buttons, set all options here', SCI_TEXT_DOMAIN ) ) );
	}

	function widget( $args, $instance ) {
		// Widget output
		extract($args, EXTR_SKIP);
 
		echo $before_widget;		//This is when we will have options for multiple skype names
		//$skypenm = empty($instance['skypenm']) ? ' ' : apply_filters('widget_skypenm', $instance['skypenm']);

		//if (!empty($skypenm)) echo $before_skypenm . $skypenm . $after_skypenm;
		$options = get_option( SCI_GENERAL_OPTIONS_NAME );		extract($options);
		if (!empty($skypename)) {			$image_icon_html = getSkypeStatusIcon($skypename, $initial_check);			echo '<a class="sk_widget" href="skype:'.$skypename.'?'.$action.'">'.$image_icon_html.' </a>';		} else {			echo __( 'You should include skype name in "Skype AJAX status" settings.', SCI_TEXT_DOMAIN );		} 

		// WIDGET CODE GOES HERE
		//echo "<h1>This is my new widget!</h1>";

		echo $after_widget;
		
	}

	//function update( $new_instance, $old_instance ) {
		// Save widget options
		    //$instance = $old_instance;
			//$instance['skypenm'] = $new_instance['skypenm'];
			//return $instance;
	//}

	function form( $instance ) {
		// Output admin widget options form		$plugin_dir_name = WP_PLUGIN_URL.'/'.str_replace(basename( __FILE__),"",plugin_basename(__FILE__));		?>		<h3>This is preview. <a href="http://neat-wordpress-plugins.mission.lt/neat-skype-status#get_it" style="text-decoration: none">Download it!</a></h3>		<b>Hover with mouse to see details</b><br><br>		<table data-tooltip="<?php echo $plugin_dir_name ?>integrated.htm?width=620" class="jTip" data-title="Never miss a contact!" class="type_table" >  		<tr><td style="width:50%;vertical-align:top;"><b>Type:</b><br>				<label id="radio_row"> <input type="radio" checked="checked" name="widget_type" value="row"/>Row </label><br>				<label id="radio_board" ><input type="radio" name="widget_type" value="board" />Board </label><br>				<label id="radio_integrated" ><input type="radio" name="widget_type" value="integrated"/>Integrated</label>				</td>		<td><b>Result:</b><br>		<span class="expl expl_row" >Widget <b>filled</b> with icons from left to right with breaks. Can be used to display a lot of icons.</span>		<span class="expl expl_board" style="display:none">Icons with visible name in <b>each line</b>. Can be used for nice representation.</span>		<span class="expl expl_integrated" style="display:none">One icon that changes automatically to display status for skype contact who is found online</span>		</td></tr>				</table><br>		<table data-tooltip="<?php echo $plugin_dir_name ?>changehow.htm?width=620" class="jTip" data-title="Manage your workflow and stop wasting your visotors' time!" ><tr><th><label>Name</label></th><th><label>skype</label></th><th><label >action</label></th><th></th></tr>			<tr>			<td><input size="8" name="visible_names[]" type="text" value="John"/></td>			<td><input size="5" name="skypenames[]" type="text" value="john.sk"/></td>			<td><select name="skype_click_actions[]">				<option selected="selected" value='call'>Call</option>				<option  value='chat'>Chat</option>				<option  value='add'>Add</option>				<option  value='userinfo'>Profile</option>				<option  value='voicemail'>Vmail</option>				<option  value='sendfile'>File</option>				<option  value='map'>Map</option>			</select></td><td class="skypename_delete" ><label>X</label></td></tr>			<tr>			<td><input size="8" name="visible_names[]" type="text" value="Aurimas"/></td>			<td><input size="5" name="skypenames[]" type="text" value="neatplugins"/></td>			<td><select name="skype_click_actions[]">				<option value='call'>Call</option>				<option  value='chat'>Chat</option>				<option  value='add'>Add</option>				<option  value='userinfo'>Profile</option>				<option  value='voicemail'>Vmail</option>				<option  value='sendfile'>File</option>				<option selected="selected"  value='map'>Map</option>			</select></td><td class="skypename_delete" ><label>X</label></td></tr>			<tr>			<td><input size="8" name="visible_names[]" type="text" value="Judie"/></td>			<td><input size="5" name="skypenames[]" type="text" value="judie.sk3"/></td>			<td><select name="skype_click_actions[]">				<option value='call'>Call</option>				<option  value='chat'>Chat</option>				<option  value='add'>Add</option>				<option  value='userinfo'>Profile</option>				<option  value='voicemail'>Vmail</option>				<option  value='sendfile'>File</option>				<option selected="selected"  value='map'>Map</option>			</select></td><td class="skypename_delete" ><label>X</label></td></tr>						<tr class="add_new_skypename"><td colspan="4" ><label >Add new.. </label></td></tr>		</table>		<br>		<div data-tooltip="<?php echo $plugin_dir_name ?>style.htm?width=620" class="jTip" data-title="Make it the way you like it!" ><label>Icons theme:</label>				<select name="sci_general[theme]">			<option value="Actions">Actions</option>			<option selected="selected" value="Emoticons">Emoticons</option>			<option value="Official Big Balloon (icon+text)">Official Big Balloon (icon+text)</option><option value="Official Big Button (icon)">Official Big Button (icon)</option>			<option value="Official Big Button (icon+text)">Official Big Button (icon+text)</option>			<option value="Official Small Button (icon)">Official Small Button (icon)</option>			<option value="Official Small Button (icon+text)">Official Small Button (icon+text)</option>			<option value="simple (medium Button)">simple (medium Button)</option>			<option value="simple (very big Button)">simple (very big Button)</option>			<option value="simple-shadow (medium Button)">simple-shadow (medium Button)</option>			<option value="simple-shadow (very big Button)">simple-shadow (very big Button)</option>		</select><br>				<label>Widget Style:</label>				<select name="widget_options[style_class]">			<option selected value='default.css'>Default</option>			<option value='round_shadow.css'>Round shadow</option>			<option value='round_shadow_transparent.css'>Transparent round shadow</option>		</select><br><br>				<table style="text-align:right"><tr><td colspan="2">		<label><input id="float_ed" type="checkbox" checked value="fixed" />Floating widget on</label>				<label><input class="float_choices" type="radio" checked name="float_side" value="left"/>Left</label>				<label><input  class="float_choices" type="radio" name="float_side" value="right"/>Right</label><br>		</td></tr>				<tr><td>		<label ><?php _e('Horizontal position:'); ?></label></td><td> <input  class="float_choices" size="7" type="text" value="0" /><br>		</td></tr>		<tr><td>		<label ><?php _e('Vertical position:'); ?></label></td><td> <input  class="float_choices" size="7" type="text" value="200" />		</td></tr>		</table>		</div>		<br>				<a href="http://neat-wordpress-plugins.mission.lt/neat-skype-status#get_it">Donate</a> towards <a href="http://www.mission.lt/en" target="_blank">mission.lt</a> and you will receive v2 as Thank You!.<br><br>						<?php		echo '<a style="float:right" href="options-general.php?page=neat-skype-status.php">' . __( 'Settings', SCI_TEXT_DOMAIN ) . '</a><br>';
		//$instance = wp_parse_args( (array) $instance, array( 'skypenm' => '' ) );
		//$skypenm = $instance['skypenm'];
		// ? >		/*
		  <p><label for="<?php echo $this->get_field_id('skypenm'); ?>">skypename: <input class="widefat" id="<?php echo $this->get_field_id('skypenm'); ?>" name="<?php echo $this->get_field_name('skypenm'); ?>" type="text" value="<?php echo attribute_escape($skypenm); ?>" /></label></p>		  		*/
		// < ?php 
	}
} 
?>